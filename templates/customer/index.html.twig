
{% extends 'fullyAuthLayout.html.twig' %}

{% block title %}
  Clients
{% endblock %}

{% block body %}
  <div class="customer-index flex min-h-full flex-col justify-center mx-auto lg:px-8">
    <div class="max-w-screen-xl px-4 py-8 md:px-8">
      <div class="items-start justify-between md:flex border-b pb-6 text-gray-600">
        <div class="max-w-lg">
          <h3 class="text-gray-800 text-xl font-bold sm:text-2xl">Liste de vos clients</h3>
          <p class="text-gray-600 mt-2">Gestion de vos employées, ajoutez, suspendez ou révokez un membre de votre équipe.</p>
        </div>
        <div class="mt-3 md:mt-0">
          <a href="{{ path('customer.new') }}" class="inline-block px-4 py-2 text-white duration-150 font-medium bg-indigo-600 rounded-lg hover:bg-indigo-500 active:bg-indigo-700 md:text-sm" rel="nofollow">
            Ajouter un(e) client(e)
          </a>
        </div>
      </div>
      <div class="mt-12 shadow-sm border rounded-lg overflow-x-auto">
        <table class="w-full table-auto text-sm text-left">
          <thead class="bg-gray-50 text-purple-900 font-medium border-b">
            <tr>
              <th class="py-3 px-6">Nom complet</th>
              <th class="py-3 px-6">Téléfone</th>
              <th class="py-3 px-6">Nombre de collectes</th>
              <th class="py-3 px-6"></th>
            </tr>
          </thead>
          <tbody class="text-gray-600 divide-y bg-white">
          {% for customer in customers %}
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">{{ customer.fullName }}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{ customer.phoneNumber }}</td>
              <td class="px-6 py-4 whitespace-nowrap">{{ customer.collectes|length }}</td>
              <td class="text-right px-6 whitespace-nowrap">
                {% if app.user.shop %}
                    <a href="{{ path('customer.show', {'id': customer.id}) }}" class="py-2 px-3 font-medium text-indigo-600 hover:text-indigo-500 duration-150 hover:bg-gray-50 rounded-lg" rel="nofollow">
                      Detailles
                    </a>
                    <a href="{{ path('customer.edit', {'id': customer.id}) }}" class="py-2 px-3 font-medium text-indigo-600 hover:text-indigo-500 duration-150 hover:bg-gray-50 rounded-lg" rel="nofollow">
                      Editer
                    </a>
                {% endif %}
                <a href="{{ path('collecte.new', {'tel': customer.phoneNumber}) }}" class="py-2 leading-none px-3 font-medium text-red-600 hover:text-red-500 duration-150 hover:bg-gray-50 rounded-lg">
                  Nouvelle collecte
                </a>

              </td>
            </tr>
          {% else %}
            <tr>
                Vous n'avez ajouté aucun employé
            </tr>
          {% endfor %}
          </tbody>
        </table>
      </div>
    </div>
  </div>
{% endblock %}
